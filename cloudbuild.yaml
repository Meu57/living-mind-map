steps:
  # Step 1: Install all dependencies, including firebase-tools
  - name: 'node:18'
    id: 'npm install'
    entrypoint: npm
    args: ['install']

  # Step 2: Build the Next.js production app and export static files
  - name: 'node:18'
    id: 'npm build'
    entrypoint: npm
    args: ['run', 'build']

  # Step 3: Run our local deploy script
  # This uses the 'firebase-tools' we just installed in Step 1
  - name: 'node:18'
    id: 'Deploy to Firebase'
    entrypoint: npm
    args: ['run', 'deploy']